{"version":3,"sources":["../../src/Utils.ts","../../src/createChart.ts","../../src/beeswarm.ts","../../src/scatterPlot.ts","../../src/index.tsx","App.tsx","index.tsx"],"names":["appendQuadrantLabel","container","labelFont","color","label","d","text","i","input","quadrantBackgroundColors","partition","data","filteredBeeswarmData","beeswarmData","margin","top","right","bottom","left","width","size","height","beeswarmWidth","Math","scatterplotWidth","svg","axisLabelColor","scatterplot","beeswarm","allYValues","scatterplotData","y","rawMinY","axisMinMax","d3","rawMaxY","minY","maxY","xScale","yScale","bottomAxisSpacing","axisLabels","bottomLeftNode","bottomRightNode","start","rightLabelBbox","end","leftAxisLabel","arrowPadding","leftAxisLabelNode","bbox","orginalX","orginalY","makeGridlinesY","zeroAxisLabel","force","simulation","radius","getLabel","textParts","createBeeswarm","quadrantLabels","quadrantLabelColor","xAxis","t","parseFloat","makeGridlinesX","x","fill","onClick","highlighted","createScatterPlot","averageLineText","minX","maxX","Root","styled","SizingElm","props","sizingNodeRef","useRef","svgNodeRef","useState","window","useEffect","updateWindowWidth","debounce","setWindowWidth","svgNode","sizingNode","select","createChart","clientHeight","windowWidth","ref","key","id","className","div","App","RawData","map","naics","toString","rca_emp","density_emp","I","II","III","IV","V","leftUp","leftDown","bottomLeft","bottomRight","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.a08a0d72.chunk.js","sourcesContent":["import * as d3 from 'd3';\n\nexport const appendQuadrantLabel =\n  (container: d3.Selection<any, unknown, null, undefined>,\n   labelFont: string | undefined,\n   color: string | undefined\n ) =>\n    (xVal: number, yVal: number, textParts: string[], textAnchor: string) => {\n      const label = container.append('text')\n          .style('text-anchor', textAnchor)\n          .style('opacity', 0.8)\n          .style('font-family', labelFont ? labelFont : \"'Source Sans Pro',sans-serif\")\n          .style('font-size', 'clamp(12px, 1.75vw, 20px)')\n          .style('font-weight', '600')\n          .style('text-transform', 'uppercase')\n          .style('pointer-events', 'none')\n          .style('dominant-baseline', 'bottom')\n          .attr('fill', color ? color : '#333')\n          .attr('x', xVal)\n          .attr('y', yVal);\n\n        label.selectAll('tspan')\n          .data(textParts)\n          .enter()\n          .append('tspan')\n          .text(d => {\n            const text = d;\n            return text !== undefined ? text : '';\n          })\n          .attr('x', xVal)\n          .attr('dx', 0)\n          .attr('dy', (_d, i) => i !== 0 ? 15 : 0);\n    };\n","import * as d3 from 'd3';\nimport partition from 'lodash/partition';\nimport createScatterPlot from './scatterPlot';\nimport createBeeswarm, {\n  maxBeeswarmWidth,\n  minBeeswarmWidth,\n} from './beeswarm';\nimport {Datum, Dimensions} from './types';\n\ninterface Input {\n  svg: d3.Selection<any, unknown, null, undefined>;\n  // tooltip: d3.Selection<any, unknown, null, undefined>;\n  data: Datum[];\n  size: Dimensions;\n  axisLabels?: {\n    left?: string,\n    leftUp?: string\n    leftDown?: string\n    bottomLeft?: string\n    bottomRight?: string\n  };\n  axisMinMax?: {\n    minX?: number,\n    maxX?: number,\n    minY?: number,\n    maxY?: number,\n  };\n  averageLineText?: string;\n  quadrantLabels?: {I?: string, II?: string, III?: string, IV?: string, V?: string};\n  quadrantBackgroundColors?: {I?: string, II?: string, III?: string, IV?: string, V?: string};\n  labelFont?: string;\n  zeroAxisLabel?: string;\n  axisLabelColor?: string;\n  quadrantLabelColor?: string;\n}\n\nexport default (input: Input) => {\n  const {\n    svg, data, size, axisLabels, axisMinMax,\n    averageLineText, quadrantLabels, labelFont,\n    zeroAxisLabel, axisLabelColor, quadrantLabelColor,\n    quadrantBackgroundColors,\n  } = input;\n\n  const [scatterplotData, beeswarmData] = partition(data, (d) => d.x > 0);\n\n  const filteredBeeswarmData = beeswarmData.filter(d => d.y > 0);\n\n  const margin = {top: 30, right: 15, bottom: 60, left: 50};\n  const width = size.width - margin.left - margin.right;\n  const height = size.height - margin.bottom - margin.top;\n  const beeswarmWidth = Math.max(minBeeswarmWidth, Math.min(width * 0.15, maxBeeswarmWidth))\n  const scatterplotWidth = width - beeswarmWidth;\n\n  // append the svg object to the body of the page\n  svg\n      .attr('width', width + margin.left + margin.right)\n      .attr('height', height + margin.top + margin.bottom);\n\n  svg.append(\"defs\").append(\"marker\")\n    .attr(\"id\", \"arrowhead\")\n    .attr(\"viewBox\", \"0 -5 10 10\")\n    .attr(\"refY\", 2)\n    .attr(\"markerWidth\", 4)\n    .attr(\"markerHeight\", 4)\n    .attr(\"orient\", \"auto-start-reverse\")\n  .append(\"path\")\n    .attr(\"d\", \"M0,0 L4,2 0,4\")\n    .attr('fill', axisLabelColor ? axisLabelColor : '#333333');\n\n  const scatterplot = svg\n    .append('g')\n      .attr('transform',\n            'translate(' + (margin.left + beeswarmWidth) + ',' + margin.top + ')');\n\n  const beeswarm = svg\n    .append('g')\n      .attr('transform',\n            'translate(' + (margin.left) + ',' + margin.top + ')');\n\n  const allYValues = scatterplotData.map(({y}) => y);\n\n  const rawMinY = axisMinMax && axisMinMax.minY !== undefined ? axisMinMax.minY : d3.min(allYValues);\n  const rawMaxY = axisMinMax && axisMinMax.maxY !== undefined ? axisMinMax.maxY : d3.max(allYValues);\n\n  const minX = 0.001;\n  const maxX = 256;\n  const minY = rawMinY ? Math.floor(rawMinY) : 0;\n  const maxY = rawMaxY ? Math.ceil(rawMaxY) : 0;\n\n  const xScale = d3.scaleLog()\n    .domain([minX, maxX])\n    .range([ 0, scatterplotWidth ])\n    .base(2)\n    .nice()\n\n  const yScale = d3.scaleLinear()\n    .domain([minY, maxY])\n    .range([ height, 0]);\n  \n  // append X axis label\n  const bottomLeftClassName = 'pswot-plot-bottom-left-label';\n  const bottomRightClassName = 'pswot-plot-bottom-right-label';\n  const bottomAxisSpacing = width * 0.015;\n  scatterplot\n    .append('text')\n      .attr('class', bottomLeftClassName)\n      .attr('y', height + (margin.top * 1.5))\n      .attr('x', xScale(1) - bottomAxisSpacing)\n      .attr('fill', axisLabelColor ? axisLabelColor : '#333')\n      .style('text-anchor', 'end')\n      .style('font-family', labelFont ? labelFont : \"'Source Sans Pro',sans-serif\")\n      .style('font-size', `clamp(14px, ${width * 0.015}px, 18px)`)\n      .style('font-weight', '600')\n      .style('text-transform', 'uppercase')\n      .text(axisLabels && axisLabels.bottomLeft ? axisLabels.bottomLeft : '');\n  scatterplot\n    .append('text')\n      .attr('class', bottomRightClassName)\n      .attr('y', height + (margin.top * 1.5))\n      .attr('x', xScale(1) + bottomAxisSpacing)\n      .attr('fill', axisLabelColor ? axisLabelColor : '#333')\n      .style('text-anchor', 'start')\n      .style('font-family', labelFont ? labelFont : \"'Source Sans Pro',sans-serif\")\n      .style('font-size', `clamp(14px, ${width * 0.015}px, 18px)`)\n      .style('font-weight', '600')\n      .style('text-transform', 'uppercase')\n      .text(axisLabels && axisLabels.bottomRight ? axisLabels.bottomRight : '');\n\n  const arrowPadding = 10;\n  const bottomLeftNode = d3.select('.' + bottomLeftClassName).node()\n  const bottomRightNode = d3.select('.' + bottomRightClassName).node()\n  if (bottomLeftNode && bottomRightNode) {\n    const start = (bottomLeftNode as any).getBBox().x - arrowPadding;\n    const rightLabelBbox = (bottomRightNode as any).getBBox();\n    const end = rightLabelBbox.x + rightLabelBbox.width  + arrowPadding;\n    scatterplot.append('line')\n      .attr('x1',start)\n      .attr('x2',end)\n      .attr('y1',height + (margin.top * 1.3))\n      .attr('y2',height + (margin.top * 1.3))\n      .attr('stroke-width', '10px')\n      .attr('stroke', 'none')\n      .style('pointer-events', 'none')\n      .attr(\"marker-end\", \"url(#arrowhead)\")\n      .attr(\"marker-start\", \"url(#arrowhead)\");\n  }\n\n  // append Y axis label\n  const leftAxisClassName = 'pswot-plot-left-axis-label';\n  const leftAxisLabel = svg\n    .append('text')\n    .attr('transform', 'rotate(-90)')\n      .attr('y', margin.right / 2)\n      .attr('x', 0 - (height / 2 + margin.top + margin.bottom))\n      .attr('fill', axisLabelColor ? axisLabelColor : '#333')\n      .attr('dy', '1.25em')\n      .style('text-anchor', 'middle')\n      .style('font-family', labelFont ? labelFont : \"'Source Sans Pro',sans-serif\")\n      .style('text-transform', 'uppercase')\n\n  leftAxisLabel.append('tspan')\n      .attr('dx', arrowPadding * 3)\n      .style('font-size', `clamp(10px, ${width * 0.015}px, 14px)`)\n      .text(axisLabels && axisLabels.leftDown ? axisLabels.leftDown : '');\n\n  leftAxisLabel.append('tspan')\n      .attr('class', leftAxisClassName)\n      .style('font-size', `clamp(14px, ${width * 0.015}px, 18px)`)\n      .style('font-weight', '600')\n      .attr('dx', arrowPadding * 4.5)\n      .text(axisLabels && axisLabels.left ? axisLabels.left : '');\n\n  leftAxisLabel.append('tspan')\n      .attr('dx', arrowPadding * 4.5)\n      .style('font-size', `clamp(10px, ${width * 0.015}px, 14px)`)\n      .text(axisLabels && axisLabels.leftUp ? axisLabels.leftUp : '');\n\n  const leftAxisLabelNode = d3.select('.' + leftAxisClassName).node()\n  if (leftAxisLabelNode) {\n    const bbox = (leftAxisLabelNode as any).getBoundingClientRect();\n    const start = bbox.y - arrowPadding - 5;\n    const end = bbox.y + bbox.height + arrowPadding + 5;\n    svg.append('line')\n      .attr('x1',bbox.x + arrowPadding + 2)\n      .attr('x2',bbox.x + arrowPadding + 2)\n      .attr('y1',start)\n      .attr('y2',end)\n      .attr('stroke-width', '10px')\n      .attr('stroke', 'none')\n      .style('pointer-events', 'none')\n      .attr(\"marker-end\", \"url(#arrowhead)\")\n      .attr(\"marker-start\", \"url(#arrowhead)\")\n  }\n\n  createBeeswarm({\n    container: beeswarm,\n    data: [...filteredBeeswarmData],\n    size: {width: beeswarmWidth - (margin.right * 2), height},\n    xScale, yScale,\n    label: quadrantLabels ? quadrantLabels.V : undefined,\n    labelFont, maxY,\n    zeroAxisLabel,\n    margin, axisLabelColor,\n    quadrantLabelColor,\n    quadrantBackgroundColors,\n  });\n\n  createScatterPlot({\n    container: scatterplot,\n    data: [...scatterplotData],\n    size: {width: scatterplotWidth, height},\n    margin,\n    averageLineText, quadrantLabels, labelFont,\n    xScale, yScale,\n    axisMinMax: {minX, maxX, minY, maxY}, axisLabelColor,\n    quadrantLabelColor,\n    quadrantBackgroundColors,\n  });\n\n\n};\n","import * as d3 from 'd3';\nimport {Datum, Dimensions} from './types';\nimport {appendQuadrantLabel} from './Utils';\n\nexport const maxBeeswarmWidth = 180;\nexport const minBeeswarmWidth = 110;\n\ninterface Input {\n  container: d3.Selection<any, unknown, null, undefined>;\n  data: Datum[];\n  size: Dimensions;\n  xScale: d3.ScaleLogarithmic<number, number, never>;\n  yScale: d3.ScaleLinear<number, number, never>;\n  label: string | undefined;\n  zeroAxisLabel: string | undefined;\n  labelFont: string | undefined;\n  maxY: number;\n  margin: {\n    top: number,\n    right: number,\n    bottom: number,\n    left: number,\n  }\n  axisLabelColor: string | undefined;\n  quadrantLabelColor: string | undefined;\n  quadrantBackgroundColors?: {V?: string};\n}\n\ninterface ForceDatum extends Datum {\n  orginalX: number;\n  orginalY: number;\n}\n\nconst createBeeswarm = (input: Input) => {\n  const {\n    container, size: {width, height}, yScale, label, labelFont, maxY, zeroAxisLabel,\n    margin, axisLabelColor, quadrantLabelColor, quadrantBackgroundColors,\n  } = input;\n\n  const data: ForceDatum[] = input.data.map(d => ({...d, orginalX: d.x, orginalY: d.y}));\n\n  if (quadrantBackgroundColors) {\n    // Add background colors\n     container\n        .append(\"rect\")\n        .attr(\"x\", 0)\n        .attr(\"y\", 0)\n        .attr(\"width\", width)\n        .attr(\"height\", yScale(0))\n        .attr(\"fill\",  quadrantBackgroundColors.V ? quadrantBackgroundColors.V : '#fff')\n  }\n\n\n  const makeGridlinesY: any = () => d3.axisLeft(yScale).ticks(10);\n  // add the Y gridlines\n  container.append('g')\n      .attr('class', 'grid')\n      .style('opacity', '0.25')\n      .style('stroke-dasharray', '3 1')\n      .call(makeGridlinesY()\n          .tickSize(-width)\n          .tickFormat(''),\n      );\n  container.append('line')\n    .attr('x1', width)\n    .attr('x2', width)\n    .attr('y1', 0)\n    .attr('y2', height)\n    .attr('stroke', '#333')\n    .style('pointer-events', 'none')\n    .style('opacity', '0.25')\n    .style('stroke-dasharray', '3 1')\n  if (zeroAxisLabel !== undefined) {\n    container.append('text')\n      .attr('x', 0)\n      .attr('y', height + (margin.top * 1.5))\n      .attr('fill', axisLabelColor ? axisLabelColor : '#333')\n      .style('opacity', 0.8)\n      .style('font-family', labelFont ? labelFont : \"'Source Sans Pro',sans-serif\")\n      .style('font-size', 'clamp(12px, 1vw, 16px)')\n      .style('font-weight', '600')\n      .style('pointer-events', 'none')\n      .text(zeroAxisLabel);\n  }\n\n  const multiplier = 1 - ((maxBeeswarmWidth - (width + 30)) / (maxBeeswarmWidth - minBeeswarmWidth));\n  const force = 7 * (1 + multiplier);\n\n  const simulation = d3.forceSimulation(data)\n      .force('x', d3.forceX(width / 2).strength(1))\n      .force(\"y\", d3.forceY(d => yScale(d.y ? d.y + 0 : 0 )))\n      .force(\"collide\", d3.forceCollide(force))\n      .stop();\n\n  for (let i = 0; i < 120; ++i) simulation.tick();\n\n  container\n    .selectAll('dot')\n    .data(data)\n    .enter()\n    .append('circle')\n      .attr('r', ({radius}) => radius ? radius : 4)\n      .style(\"fill\", \"#69b3a2\")\n      .attr(\"cx\", d => d.x)\n      .attr(\"cy\", d => yScale(d.orginalY));\n\n  if (label !== undefined) {\n    const getLabel = appendQuadrantLabel(container, labelFont, quadrantLabelColor);\n\n    const textParts = (label as string).split('\\n');\n    const xVal = width / 2;\n    const yVal = yScale(maxY) + 20;\n    getLabel(xVal, yVal, textParts, 'middle');\n  }\n\n}\n\nexport default createBeeswarm;\n","import * as d3 from 'd3';\nimport {Datum, Dimensions} from './types';\nimport {appendQuadrantLabel} from './Utils';\n\ninterface Input {\n  container: d3.Selection<any, unknown, null, undefined>;\n  // tooltip: d3.Selection<any, unknown, null, undefined>;\n  data: Datum[];\n  size: Dimensions;\n  xScale: d3.ScaleLogarithmic<number, number, never>;\n  yScale: d3.ScaleLinear<number, number, never>;\n  margin: {\n    top: number,\n    right: number,\n    bottom: number,\n    left: number,\n  }\n  axisMinMax: {\n    minX: number,\n    maxX: number,\n    minY: number,\n    maxY: number,\n  };\n  averageLineText?: string;\n  quadrantLabels?: {I?: string, II?: string, III?: string, IV?: string};\n  quadrantBackgroundColors?: {I?: string, II?: string, III?: string, IV?: string};\n  labelFont?: string;\n  axisLabelColor: string | undefined;\n  quadrantLabelColor: string | undefined;\n}\n\nconst createScatterPlot = (input: Input) => {\n  const {\n    container, size: {width, height},\n    averageLineText, quadrantLabels, labelFont, margin, data, xScale, yScale,\n    axisMinMax: {minX, maxX, minY, maxY}, axisLabelColor, quadrantLabelColor,\n    quadrantBackgroundColors,\n  } = input;\n\n  if (quadrantBackgroundColors) {\n    // Add background colors\n     container\n        .append(\"rect\")\n        .attr(\"x\", xScale(1))\n        .attr(\"y\", 0)\n        .attr(\"width\", xScale(maxX) - xScale(1))\n        .attr(\"height\", yScale(0))\n        .attr(\"fill\",  quadrantBackgroundColors.I ? quadrantBackgroundColors.I : '#fff')\n     container\n        .append(\"rect\")\n        .attr(\"x\", 0)\n        .attr(\"y\", 0)\n        .attr(\"width\", xScale(1))\n        .attr(\"height\", yScale(0))\n        .attr(\"fill\",  quadrantBackgroundColors.II ? quadrantBackgroundColors.II : '#fff')\n     container\n        .append(\"rect\")\n        .attr(\"x\", 0)\n        .attr(\"y\", yScale(0))\n        .attr(\"width\", xScale(1))\n        .attr(\"height\", yScale(minY) - yScale(0))\n        .attr(\"fill\",  quadrantBackgroundColors.III ? quadrantBackgroundColors.III : '#fff')\n     container\n        .append(\"rect\")\n        .attr(\"x\", xScale(1))\n        .attr(\"y\", yScale(0))\n        .attr(\"width\", xScale(maxX) - xScale(1))\n        .attr(\"height\", yScale(minY) - yScale(0))\n        .attr(\"fill\",  quadrantBackgroundColors.IV ? quadrantBackgroundColors.IV : '#fff')\n  }\n\n  // Add X axis\n  const xAxis = container.append('g')\n    .attr('transform', 'translate(0,' + height + ')')\n    .call(\n      d3.axisBottom(xScale)\n        .ticks(10)\n        .tickFormat(t => parseFloat((t as number).toFixed(3)) as any)\n    )\n    xAxis.select('path')\n      .attr('stroke', 'none')\n    xAxis.selectAll('.tick line')\n      .attr('stroke', 'none')\n    xAxis.selectAll('text')\n      .attr('fill', axisLabelColor ? axisLabelColor : '#333')\n      .style('opacity', '0.75')\n      .style('font-size', `clamp(7px, ${width * 0.0175}px, 12px)`)\n\n  // gridlines in x axis function\n  const makeGridlinesX: any = () => d3.axisBottom(xScale).ticks(10);\n\n\n  // gridlines in y axis function\n  const makeGridlinesY: any = () => d3.axisLeft(yScale).ticks(10);\n\n  // add the X gridlines\n  container.append('g')\n      .attr('class', 'grid')\n      .attr('transform', 'translate(0,' + height + ')')\n      .style('opacity', '0.25')\n      .style('stroke-dasharray', '3 1')\n      .call(makeGridlinesX()\n          .tickSize(-height)\n          .tickFormat(''),\n      );\n\n  // add the Y gridlines\n  container.append('g')\n      .attr('class', 'grid')\n      .style('opacity', '0.25')\n      .style('stroke-dasharray', '3 1')\n      .call(makeGridlinesY()\n          .tickSize(-width)\n          .tickFormat(''),\n      );\n\n  // add quadrant lines\n  container.append('line')\n    .attr('x1',xScale(minX))\n    .attr('x2',xScale(maxX))\n    .attr('y1',yScale(0))\n    .attr('y2',yScale(0))\n    .attr('stroke-width', '2px')\n    .style('pointer-events', 'none')\n    .attr('stroke', '#333');\n  container.append('line')\n    .attr('x1',xScale(1))\n    .attr('x2',xScale(1))\n    .attr('y1',yScale(minY))\n    .attr('y2',0 - margin.top)\n    .attr('stroke-width', '2px')\n    .style('pointer-events', 'none')\n    .attr('stroke', '#333');\n\n  if (averageLineText) {\n    container.append('text')\n      .attr('x',xScale(1) + 4)\n      .attr('y',-10)\n      .attr('fill', axisLabelColor ? axisLabelColor : '#333')\n      .style('opacity', 0.8)\n      .style('font-family', labelFont ? labelFont : \"'Source Sans Pro',sans-serif\")\n      .style('font-size', 'clamp(12px, 1vw, 16px)')\n      .style('font-weight', '600')\n      .style('pointer-events', 'none')\n      .text(averageLineText);\n\n  }\n\n  if (quadrantLabels !== undefined) {\n    const getLabel = appendQuadrantLabel(container, labelFont, quadrantLabelColor);\n    if (quadrantLabels.I !== undefined) {\n      const xVal = width - 4;\n      const yVal = yScale(maxY) + 20;\n      const textParts = (quadrantLabels.I as string).split('\\n');\n      getLabel(xVal, yVal, textParts, 'end');\n    }\n    if (quadrantLabels.II !== undefined) {\n      const xVal = xScale(minX) + 4;\n      const yVal = yScale(maxY) + 20;\n      const textParts = (quadrantLabels.II as string).split('\\n');\n      getLabel(xVal, yVal, textParts, 'start');\n    }\n    if (quadrantLabels.III !== undefined) {\n      const textParts = (quadrantLabels.III as string).split('\\n');\n      const xVal = xScale(minX) + 4;\n      const yVal = yScale(minY) - ((textParts.length - 1) * 15) - 6;\n      getLabel(xVal, yVal, textParts, 'start');\n    }\n    if (quadrantLabels.IV !== undefined) {\n      const textParts = (quadrantLabels.IV as string).split('\\n');\n      const xVal = width - 4;\n      const yVal = yScale(minY) - ((textParts.length - 1) * 15) - 6;\n      getLabel(xVal, yVal, textParts, 'end');\n    }\n  }\n\n  // Add dots\n  container.append('g')\n    .selectAll('dot')\n    .data(data)\n    .enter()\n    .append('circle')\n      .attr('cx', ({x}) => xScale(x))\n      .attr('cy', ({y}) => yScale(y))\n      .attr('r', ({radius}) => radius ? radius : 4)\n      .style('fill', ({fill}) => fill ? fill : '#69b3a2')\n      .style('cursor', ({onClick}) => onClick ? 'pointer' : 'default')\n      // .on('mousemove', ({label, tooltipContent, tooltipContentOnly}) => {\n      //   if (tooltipContentOnly && tooltipContent && tooltipContent.length) {\n      //     tooltip.html(tooltipContent);\n      //   } else {\n      //     const content = tooltipContent === undefined || tooltipContent.length === 0\n      //       ? '' : `:<br />${tooltipContent}`;\n      //     tooltip.html(`<strong>${label}</strong>${content}`);\n\n      //   }\n      //   tooltip\n      //     .style('display', 'block')\n      //     .style('left', (d3.event.pageX + 4) + 'px')\n      //     .style('top', (d3.event.pageY - 4) + 'px');\n      //   })\n      // .on('mouseout', () => {\n      //   tooltip\n      //       .style('display', 'none');\n      // })\n      .on('click', ({onClick}) => onClick ? onClick() : undefined);\n\n  const highlighted = data.find(d => d.highlighted);\n  if (highlighted) {\n    // Add highlighted dot background\n    container.append('g')\n      .selectAll('dot')\n      .data([highlighted])\n      .enter()\n      .append('circle')\n        .attr('cx', ({x}) => xScale(x))\n        .attr('cy', ({y}) => yScale(y))\n        .attr('r', 16)\n        .style('fill', ({fill}) => fill ? fill : '#69b3a2')\n        .style('opacity', '0.4')\n        .style('pointer-events', 'none');\n    // Add highlighted dot over to top\n    container.append('g')\n      .selectAll('dot')\n      .data([highlighted])\n      .enter()\n      .append('circle')\n        .attr('cx', ({x}) => xScale(x))\n        .attr('cy', ({y}) => yScale(y))\n        .attr('r', ({radius}) => radius ? radius : 4)\n        .style('fill', ({fill}) => fill ? fill : '#69b3a2')\n        .style('cursor', ({onClick}) => onClick ? 'pointer' : 'default')\n        // .on('mousemove', ({label, tooltipContent, tooltipContentOnly}) => {\n        //   if (tooltipContentOnly && tooltipContent && tooltipContent.length) {\n        //     tooltip.html(tooltipContent);\n        //   } else {\n        //     const content = tooltipContent === undefined || tooltipContent.length === 0\n        //       ? '' : `:<br />${tooltipContent}`;\n        //     tooltip.html(`<strong>${label}</strong>${content}`);\n\n        //   }\n        //   tooltip\n        //     .style('display', 'block')\n        //     .style('left', (d3.event.pageX + 4) + 'px')\n        //     .style('top', (d3.event.pageY - 4) + 'px');\n        //   })\n        // .on('mouseout', () => {\n        //   tooltip\n        //       .style('display', 'none');\n        // });\n  }\n}\n\nexport default createScatterPlot;\n","import { select } from 'd3';\nimport React, {useState, useEffect, useRef} from 'react';\nimport styled from 'styled-components';\nimport createChart from './createChart';\nimport debounce from 'lodash/debounce';\nimport {Datum} from './types';\n\nconst Root = styled.div`\n  width: 100%;\n  height: 100%;\n  margin: auto;\n`;\n\nconst SizingElm = styled.div`\n  height: 100%;\n  width: 100%;\n\n  svg {\n    width: 100%;\n    height: 100%;\n  }\n`;\n\ninterface Props {\n  id: string;\n  data: Datum[];\n  axisLabels?: {\n    left?: string,\n    leftUp?: string\n    leftDown?: string\n    bottomLeft?: string\n    bottomRight?: string\n  };\n  axisMinMax?: {\n    minX?: number,\n    maxX?: number,\n    minY?: number,\n    maxY?: number,\n  };\n  averageLineText?: string;\n  zeroAxisLabel?: string;\n  quadrantLabels?: {I?: string, II?: string, III?: string, IV?: string, V?: string};\n  axisLabelColor?: string;\n  quadrantLabelColor?: string;\n  quadrantBackgroundColors?: {I?: string, II?: string, III?: string, IV?: string, V?: string};\n}\n\nexport const PSwotPlot = (props: Props) => {\n  const {\n    id, data, axisLabels, axisMinMax, averageLineText, quadrantLabels,\n    zeroAxisLabel, axisLabelColor, quadrantLabelColor, quadrantBackgroundColors,\n  } = props;\n\n  const sizingNodeRef = useRef<HTMLDivElement | null>(null);\n  const svgNodeRef = useRef<any>(null);\n\n  const [windowWidth, setWindowWidth] = useState<number>(window.innerWidth);\n\n  useEffect(() => {\n    const updateWindowWidth = debounce(() => {\n      setWindowWidth(window.innerWidth);\n    }, 500);\n    window.addEventListener('resize', updateWindowWidth);\n    return () => {\n      window.removeEventListener('resize', updateWindowWidth);\n    };\n  }, []);\n\n\n  useEffect(() => {\n    let svgNode: HTMLDivElement | null = null;\n    if (svgNodeRef && svgNodeRef.current && sizingNodeRef && sizingNodeRef.current) {\n      const sizingNode = sizingNodeRef.current;\n      svgNode = svgNodeRef.current;\n      const svg = select(svgNode);\n      createChart({\n        svg, data: [...data], size: {\n          width: sizingNode.clientWidth, height: sizingNode.clientHeight,\n        },\n        axisLabels,\n        axisMinMax,\n        averageLineText,\n        quadrantLabels,\n        zeroAxisLabel,\n        axisLabelColor,\n        quadrantLabelColor,\n        quadrantBackgroundColors,\n      });\n    }\n    return () => {\n      if (svgNode) {\n        svgNode.innerHTML = '';\n      }\n    };\n  }, [svgNodeRef, sizingNodeRef, windowWidth, props]);\n\n  return (\n    <Root>\n      <SizingElm ref={sizingNodeRef}>\n        <svg ref={svgNodeRef} key={id + windowWidth + 'svg'} className={'react-fast-charts-root-svg'} />\n      </SizingElm>\n    </Root>\n  );\n};\n\nexport {Datum};\n\nexport default PSwotPlot;\n","import React from 'react'\nimport PSwotPlot, {Datum} from 'react-pswot-plot'\nimport RawData from './data/hefei_employees.json';\nimport styled from 'styled-components';\n\nconst Root = styled.div`\n  width: 100vw;\n  height: 100vh;\n`;\n\nconst App = () => {\n  const data: Datum[] = RawData.map(d => {\n    return {\n      label: d.naics.toString(),\n      x: d.rca_emp,\n      y: d.density_emp,\n    }\n  })\n\n  return (\n    <Root>\n      <PSwotPlot\n        id={'react-pswot-plot-demo'}\n        data={data}\n        averageLineText={'Relative Advantage = 1'}\n        quadrantLabels={{\n          I: 'Strength',\n          II: 'Opportunity',\n          III: 'Threat',\n          IV: 'Weakness',\n          V: 'Potential',\n        }}\n        quadrantBackgroundColors={{\n          I: '#dadbdd',\n          II: '#e6e7e8',\n          III: '#f2f3f3',\n          IV: '#fafafb',\n          V: '#edf6f4',\n        }}\n        zeroAxisLabel={'Relative Advantage = 0'}\n        axisLabels={{\n          left: 'Predicted Density Change',\n          leftUp: 'Growing',\n          leftDown: 'Decreasing',\n          bottomLeft: 'Low Relative Advantage',\n          bottomRight: 'High Relative Advantage',\n        }}\n        axisLabelColor={'#333'}\n        quadrantLabelColor={'#f69c7c'}\n      />\n    </Root>\n  )\n}\n\nexport default App\n","import './index.css'\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}